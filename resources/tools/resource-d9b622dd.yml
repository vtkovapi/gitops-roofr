async: false
function:
  name: get_estimate
  description: |-
    Get an instant roofing estimate for a property. Also stores the lead in Roofr.

    Requires:
    - Valid addressId from resolve_address tool
    - Contact info (phone, name)
    - Property details (type, slope, timeline)

    Returns estimate ranges for different material options.
    For flat roofs or unsupported materials, estimate may not be available.
  parameters:
    properties:
      addressUuid:
        default: ""
        description: The Roofr addressId obtained from resolve_address tool
        type: number
      allowHomeownerSms:
        default: ""
        description: "Whether caller consented to receive SMS messages. "
        type: boolean
      contactEmail:
        description: Caller's email address for sending estimate details (optional)
        type: string
      contactName:
        description: Caller's name
        type: string
      contactPhone:
        default: ""
        description: Caller's phone number for follow-up, must include + prefix (e.g., +15101234567 not 5101234567)
        type: string
      propertyType:
        description: Type of property
        enum:
          - residential
          - commercial
        type: string
      shingleType:
        default: ""
        description: |-
          Preferred shingle/material type (e.g., "asphalt", "metal", "tile", "slate")
          Use "asphalt" if nothing is provided
        enum:
          - asphalt
          - metal
          - tile
          - slate
        type: string
      slope:
        default: ""
        description: Roof slope/pitch as described by caller
        enum:
          - flat
          - low
          - steep
          - moderate
        type: string
      timeline:
        default: ""
        description: Project timeline urgency
        enum:
          - urgent
          - soon
          - none
        type: string
    required:
      - addressUuid
      - contactPhone
      - contactName
      - propertyType
    type: object
  strict: true
messages:
  - blocking: true
    content: Let me pull up your estimate now. This will just take a moment.
    type: request-start
  - content: Still calculating your estimate.
    timingMilliseconds: 10000
    type: request-response-delayed
server:
  credentialId: 2f6db611-ad08-4099-8bd8-74db37b0a07e
  timeoutSeconds: 20
  url: https://ceramic-drip-3744.preview.roofr-dev.com/api/v1/voice-lead/vapi/webhook/7e05bc70-6621-459d-aded-030228c0d340
type: function
