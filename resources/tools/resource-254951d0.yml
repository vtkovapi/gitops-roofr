async: false
function:
  name: resolve_address
  description: |-
    Resolve a spoken address to a Roofr addressId.

    Use case 1 - Initial request: Send the address string collected from caller.
    Use case 2 - After disambiguation: Send the selected address string and googlePlaceId to get the addressId for the address selected by the caller.

    Returns:
    - addressId: when address resolves to a single match
    - suggestions: array of {address, googlePlaceId} when multiple matches found

    Retry up to 3 times if no matches found. Transfer to human if still unresolved.
  parameters:
    properties:
      address:
        default: ""
        description: |-
          The address string spoken by the caller. Include street, city, and state if provided.
          Use this for initial address collection and after caller selects from disambiguation options.
          Example: "123 Main Street, Austin, Texas"
        type: string
      googlePlaceId:
        description: |-
          Google Place ID from a previous suggestions response.
          Use this after caller selects from disambiguation options.
        type: string
    required: []
    type: object
  strict: true
messages:
  - blocking: true
    content: Let me verify that address.
    type: request-start
  - content: Still looking up that address.
    timingMilliseconds: 5000
    type: request-response-delayed
server:
  credentialId: 2f6db611-ad08-4099-8bd8-74db37b0a07e
  headers:
    Content-Type: application/json
  timeoutSeconds: 20
  url: https://ceramic-drip-3744.preview.roofr-dev.com/api/v1/voice-lead/vapi/webhook/7e05bc70-6621-459d-aded-030228c0d340
type: function
